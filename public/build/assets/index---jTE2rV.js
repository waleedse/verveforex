import{b as g,d as j,r as N,j as e,m as w,h as v,_ as i}from"./app-Aw1LNYk9.js";import{u as b}from"./index.esm-wbjEyNz_.js";import{l as y}from"./Auth-ExbnaHhZ.js";import{r as k}from"./commonService-cPZpRGBU.js";import"./useAxios-anTgZer3.js";const R=()=>{const n=g(),u=j(),{formik:C,setFieldValue:S,values:x,handleChange:o,touched:r,errors:a,handleSubmit:m}=b({initialValues:{email:"",password:""},validationSchema:y,onSubmit:t=>{let l={email:t.email,password:t.password};w.post("/api/client-login",l).then(s=>{var c,d,h,p;((c=s.data)==null?void 0:c.status)==200?(localStorage.setItem("token",s.data.token),u(v((d=s.data)==null?void 0:d.user)),n("/client")):((h=s.data)==null?void 0:h.status)==402?n("/verify-email",{state:{email:t.email}}):i.error((p=s==null?void 0:s.data)==null?void 0:p.message)}).catch(s=>{i.error(s.response.data.message)})}});N.useEffect(()=>{localStorage.getItem("token")&&n("/client")},[]);const f=async()=>{var t;if(a.email)i.error("Enter email so, we'll send the reset password link to your email if it registered.");else{i.loading("Sending reset password email...");let l=await k({email:x.email});i.dismiss(),console.log(l),l.status==200?i.success("Reset password email sent. Please check your email"):i.error((t=l.response.data)==null?void 0:t.message)}};return e.jsx("div",{children:e.jsx("div",{className:"auth-main",children:e.jsx("div",{className:"auth-wrapper v1",children:e.jsx("div",{className:"auth-form",children:e.jsx("div",{className:"card my-5",children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"text-center",children:e.jsx("a",{href:"/",children:e.jsx("img",{src:"/assets/images/logo.png",alt:"img"})})}),e.jsx("div",{className:"saprator my-3",children:e.jsx("span",{children:"Client Login"})}),e.jsx("h4",{className:"text-center f-w-500 mb-3",children:"Login with your email"}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("input",{type:"email",name:"email",onChange:o,className:`form-control ${a.email&&r.email&&"is-invalid"}`,id:"floatingInput",placeholder:"Email Address"}),a.email&&r.email&&e.jsx("p",{className:"invalid-feedback",children:a.email})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("input",{type:"password",onChange:o,name:"password",className:`form-control ${a.email&&r.email&&"is-invalid"}`,id:"floatingInput1",placeholder:"Password"}),a.password&&r.password&&e.jsxs("p",{className:"invalid-feedback",children:[" ",a.password]})]}),e.jsxs("div",{className:"d-flex mt-1 justify-content-between align-items-center",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input input-primary",type:"checkbox",id:"customCheckc1",defaultChecked:!0}),e.jsx("label",{className:"form-check-label text-muted",htmlFor:"customCheckc1",children:"Remember me?"})]}),e.jsx("h6",{style:{cursor:"pointer"},onClick:f,className:"text-secondary f-w-400 mb-0",children:"Forgot Password?"})]}),e.jsx("div",{className:"d-grid mt-4",children:e.jsx("button",{type:"submit",onClick:m,className:"btn btn-primary",children:"Login"})})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-end mt-4",children:[e.jsx("h6",{className:"f-w-500 mb-0",children:"Don't have an Account?"}),e.jsx("a",{href:"/signup",className:"link-primary",children:"Create Account"})]})]})})})})})})};export{R as default};
